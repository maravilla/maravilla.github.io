<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Actividades</title>

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Lato:700%7CMontserrat:400,600" rel="stylesheet">

    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

    <!-- Font Awesome Icon -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!-- Custom stlylesheet -->
    <link type="text/css" rel="stylesheet" href="css/style.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>

    <!-- Header -->
    <header id="header">
        <div class="container">

            <div class="navbar-header">
                <!-- Logo -->
                <div class="navbar-brand">
                    <a class="logo" href="index.html">
                        <bold>Seminario de Solución de Problemas de Sistemas Operativos de Red</bold>
                    </a>
                </div>
                <!-- /Logo -->

                <!-- Mobile toggle -->
                <button class="navbar-toggle">
                    <span></span>
                </button>
                <!-- /Mobile toggle -->
            </div>

            <!-- Navigation -->
            <nav id="nav">
                <ul class="main-menu nav navbar-nav navbar-right">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="blog.html">Actividades</a></li>
                </ul>
            </nav>
            <!-- /Navigation -->

        </div>
    </header>
    <!-- /Header -->

    <!-- Hero-area -->
    <div class="hero-area section">

        <!-- Backgound Image -->
        <div class="bg-image bg-parallax overlay" style="background-image:url(./img/blog-post-background.jpg)"></div>
        <!-- /Backgound Image -->

        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1 text-center">
                    <ul class="hero-area-tree">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="blog.html">Actividades</a></li>
                        <li>Aplicación Básica en Python con Django</li>
                    </ul>
                    <h1 class="white-text">Aplicación Básica en Python con Django</h1>
                    <ul class="blog-post-meta">
                        <li class="blog-meta-author">Por : <a href="#">Enrique Maravilla - 215861428</a></li>
                        <li>20 Sept, 2019</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
    <!-- /Hero-area -->

    <!-- Blog -->
    <div id="blog" class="section">

        <!-- container -->
        <div class="container">

            <!-- row -->
            <div class="row">

                <!-- main blog -->
                <div id="main" class="col-md-12">

                    <!-- blog post -->
                    <div class="blog-post">


                        <p style="text-align: justify;"><strong>Aplicación Básica en Python con Django</strong></p>

                        <p>Se trata de una aplicación de TODO es decir una lista de tareas elaborada en Django utilizando el IDE PyCharm como apoyo</p>
                        <p><a href="https://www.jetbrains.com/pycharm/download/">Descargar Pycharm</a></p>
                        <p>&nbsp;</p>

                        <p>La implementación de la aplicación "TODO" consiste en la instalación del framework Django. Django es un framework para la creación de aplicaciones Web que utiliza la arquitectura Model View Controller donde el Modelo representa la estructura de los datos y el programa, la vista representa lo que ve el usuario en la interfaz gráfica y el controlador se hace cargo de los "requests" o pedidos que es lo que hace interacción entre el usuario y la vista y despliega la información necesaria al interactuar entre el usuario y los datos del modelo. </p>


                        <p>&nbsp;</p>

                        <p>Hay que asegurarnos que tenemos Python instalado corriendo el comando "Python" o "py" '--verison' en una terminal </p>
                        <img src="img/checkPython.jpg" width="900px">
                        <p>&nbsp;</p>
                        <p>de otra manera:</p>


                        <p><a href="https://www.python.org/downloads/">Instalar Python3</a></p>
                        <p>&nbsp;</p>

                        <p>También hay que asegurarnos que tenemos PIP instalado, que es nuestro administrador de paquetes que nos permitirá instalar Django</p>

                        <img src="img/checkPIP.jpg" width="900px">
                        <p>&nbsp;</p>
                        <p>de otra manera:</p>


                        <p><a href="https://pip.pypa.io/en/stable/installing/">Instalar PIP</a></p>
                        <p>&nbsp;</p>


                        <p>Después de esto podemos correr el siguiente código: <code>pip install django</code> que instalará django por nosotros.</p>


                        <p>&nbsp;</p>

                        <img src="img/djangoInstalled.jpg" width="900px">




                        <p>Podemos ahora continuar a crear nuestro proyecto en PyCharm para el control de nuestros archivos y la edicion del texto.<br>
                        </p>

                        <img src="img/djangoNewProject.jpg" width="900px">


                        <p>Hay que especificar la ruta para nuestro proyecto y navegar a ella en la consola para poder crear el proyecto de Django mediante los siguientes comandos:</p>

                        <p>&nbsp;</p>

                        <code>django-admin.py startproject todoapp </code>
                        <p>&nbsp;</p>

                        <img src="img/createDjangoProject.jpg" width="900px">
                        <p>&nbsp;</p>
                        <code>cd todoapp </code>
                        <p>&nbsp;</p>
                        <code>manage.py startapp todolist </code>

                        <p>&nbsp;</p>

                        <p>Al regresar a nuestro proyecto de PyCharm podemos ver la siguiente estructura del proyecto:</p>

                        <img src="img/djangoStructure.jpg" width="500px">

                        <p>&nbsp;</p>

                        <p>Una vez creado el proyecto podemos correrlo con el siguiente comando y visitando su URL:</p>

                        <code>manage.py runserver 8100</code>
                        <p>&nbsp;</p>

                        <p>http://localhost:8100</p>

                        <p>Si la instalación funcionó podremos ver el siguiente mensaje:</p>

                        <img src="img/djangoWorked.jpg" width="900px">


                        <p>Ahora hay que agregar nuestra aplicación nueva a la lista de aplicaciones instaladas en el archivo "settings.py":</p>

                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">INSTALLED_APPS = [ <br>
                            'django.contrib.admin', <br>
                            'django.contrib.auth', <br>
                            'django.contrib.contenttypes', <br>
                            'django.contrib.sessions', <br>
                            'django.contrib.messages', <br>
                            'django.contrib.staticfiles', <br>
                            'todoList', <br>
                            ]</span></pre>

                        <p>Paso siguiente es agregar la ruta a nuestros templates al crear un folder llamado "templates" en el directorio del proyecto y reemplazando en settings el siguiente código: </p>



                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">
                            TEMPLATES = [<br>
                            {<br>
                            'BACKEND': 'django.template.backends.django.DjangoTemplates',<br>
                            'DIRS': [os.path.join(BASE_DIR, "templates")],<br>
                            'APP_DIRS': True,<br>
                            'OPTIONS': {<br>
                            'context_processors': [<br>
                            'django.template.context_processors.debug',<br>
                            'django.template.context_processors.request',<br>
                            'django.contrib.auth.context_processors.auth',<br>
                            'django.contrib.messages.context_processors.messages',<br>
                            ],<br>
                            },<br>
                            },<br>
                            ]<br>
                        </span></pre>



                        <p>También agregamos las siguientes lineas: </p>


                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">
                            PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))<br>
                            STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')<br>
                            STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'<br></span>
                        </pre>



                        <p>Finalmente podemos crear nuestra aplicación en models.py que se basa en el siguiente código:</p>


                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">

                            from django.utils import timezone<br>
                            class Category(models.Model): # The Category table name that inherits models.Model<br>
                            name = models.CharField(max_length=100) #Like a varchar<br>
                            class Meta:<br>
                            verbose_name = ("Category")<br>
                            verbose_name_plural = ("Categories")<br>
                            def __str__(self):<br>
                            return self.name #name to be shown when called<br>
                            class TodoList(models.Model): #Todolist able name that inherits models.Model<br>
                            title = models.CharField(max_length=250) # a varchar<br>
                            content = models.TextField(blank=True) # a text field<br>
                            created = models.DateField(default=timezone.now().strftime("%Y-%m-%d")) # a date<br>
                            due_date = models.DateField(default=timezone.now().strftime("%Y-%m-%d")) # a date<br>
                            category = models.ForeignKey(Category, default="general") # a foreignkey<br>
                            class Meta:<br>
                            ordering = ["-created"] #ordering by the created field<br>
                            def __str__(self):<br>
                            return self.title #name to be shown when called<br>


                        </span></pre>

                        <p>Creamos nuestro View:</p>

                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">from django.shortcuts import render,redirect<br>
                            from .models import TodoList, Category<br>
                            def index(request): #the index view<br>
                            todos = TodoList.objects.all() #quering all todos with the object manager<br>
                            categories = Category.objects.all() #getting all categories with object manager<br>
                            if request.method == "POST": #checking if the request method is a POST<br>
                            if "taskAdd" in request.POST: #checking if there is a request to add a todo<br>
                            title = request.POST["description"] #title<br>
                            date = str(request.POST["date"]) #date<br>
                            category = request.POST["category_select"] #category<br>
                            content = title + " -- " + date + " " + category #content<br>
                            Todo = TodoList(title=title, content=content, due_date=date, category=Category.objects.get(name=category))<br>
                            Todo.save() #saving the todo<br>
                            return redirect("/") #reloading the page<br>
                            if "taskDelete" in request.POST: #checking if there is a request to delete a todo<br>
                            checkedlist = request.POST["checkedbox"] #checked todos to be deleted<br>
                            for todo_id in checkedlist:<br>
                            todo = TodoList.objects.get(id=int(todo_id)) #getting todo id<br>
                            todo.delete() #deleting todo<br>
                            return render(request, "index.html", {"todos": todos, "categories":categories})</span></pre>

                        <p>Y creamos un index.html para la interfaz</p>

                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">&lt;!DOCTYPE html&gt;<br />&lt;html &gt;<br />&lt;head&gt;<br />  &lt;meta charset="UTF-8"&gt;<br />  &lt;title&gt;TodoApp - Create A Todo With Django&lt;/title&gt;<br />  {% load static %}<br />  &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"&gt;<br />  &lt;link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"&gt;<br />   &lt;link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"&gt;<br />&lt;/head&gt;</span><span id="d691" class="nf ma dz ap mz b ec nu nv nw nx ny nh l ni" data-selectable-paragraph="">&lt;body&gt;<br />&lt;div django-app="TaskManager"&gt;        <br />    &lt;div class="container"&gt;<br />            &lt;div class="content"&gt;<br />            &lt;h1&gt;TodoApp&lt;/h1&gt;<br />            &lt;p class="tagline"&gt;a Django todo app&lt;/p&gt;<br />            &lt;form action="" method="post"&gt;<br />            {% csrf_token %} &lt;!-- csrf token for basic security --&gt;<br />                &lt;div class="inputContainer"&gt;<br />                    &lt;input type="text" id="description" class="taskName" placeholder="What do you need to do?" name="description" required&gt;<br />                    &lt;label for="description"&gt;Description&lt;/label&gt;<br />                &lt;/div&gt;<br />                &lt;div class="inputContainer half last"&gt;<br />                    &lt;i class="fa fa-caret-down selectArrow"&gt;&lt;/i&gt;<br />                    &lt;select id="category" class="taskCategory" name="category_select"&gt;<br />                    &lt;option class="disabled" value=""&gt;Choose a category&lt;/option&gt;<br />                    {% for category in categories %}<br />                        &lt;option class="" value="{{ category.name }}" name="{{ category.name }}"&gt;{{ category.name }}&lt;/option&gt;<br />                    {% endfor %}<br />                    &lt;/select&gt;<br />                    &lt;label for="category"&gt;Category&lt;/label&gt;<br />                &lt;/div&gt;<br />                &lt;div class="inputContainer half last right"&gt;<br />                    &lt;input type="date" id="dueDate" class="taskDate" name="date"&gt;<br />                    &lt;label for="dueDate"&gt;Due Date&lt;/label&gt;<br />                &lt;/div&gt;<br />                &lt;div class="row"&gt;<br />                    &lt;button class="taskAdd" name="taskAdd" type="submit"&gt;&lt;i class="fa fa-plus icon"&gt;&lt;/i&gt;Add task&lt;/button&gt;<br />                    &lt;button class="taskDelete" name="taskDelete" formnovalidate="" type="submit" onclick="$('input#sublist').click();"&gt;&lt;i class="fa fa-trash-o icon"&gt;&lt;/i&gt;Delete Tasks&lt;/button&gt;<br />                &lt;/div&gt;</span><span id="9f13" class="nf ma dz ap mz b ec nu nv nw nx ny nh l ni" data-selectable-paragraph="">            &lt;ul class="taskList"&gt;<br />            {% for todo in todos %} &lt;!-- django template lang - for loop --&gt;<br />                &lt;li class="taskItem"&gt;<br />                    &lt;input type="checkbox" class="taskCheckbox" name="checkedbox" id="{{ todo.id }}" value="{{ todo.id }}"&gt;<br />                    &lt;label for="{{ todo.id }}"&gt;&lt;span class="complete-"&gt;{{ todo.title }}&lt;/span&gt;&lt;/label&gt;<br />                    &lt;span class="category-{{ todo.category }}"&gt;{{ todo.category }}&lt;/span&gt;<br />                    &lt;strong class="taskDate"&gt;&lt;i class="fa fa-calendar"&gt;&lt;/i&gt;{{ todo.created }} - {{ todo.due_date }}&lt;/strong&gt;<br />                &lt;/li&gt;<br />            {% endfor %}</span><span id="5183" class="nf ma dz ap mz b ec nu nv nw nx ny nh l ni" data-selectable-paragraph="">            &lt;/ul&gt;&lt;!-- taskList --&gt;<br />            &lt;/form&gt;<br />            &lt;/div&gt;&lt;!-- content --&gt;</span><span id="7a4c" class="nf ma dz ap mz b ec nu nv nw nx ny nh l ni" data-selectable-paragraph=""> &lt;/div&gt;&lt;!-- container --&gt;<br />&lt;/div&gt;<br />&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"&gt;&lt;/script&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</span></pre>



                        <p>&nbsp;</p>

                        <p>En este paso se pueden utilizar los estilos en CSS que se deseen al agregar el folder de Static->styles en la raiz del proyecto o inline en el HTML</p>

                        <p><br> Lo último por hacer es administrar nuestros URLs en urls.py:</p>
                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">from django.conf.urls import url
                        from django.contrib import admin
                        from todoList.views import index
                        urlpatterns = [
                        url(r'^admin/', admin.site.urls),
                        url(r'^$', index, name="TodoList"),
                        ] </span></pre>
                        <p><br> Creamos nuestra cuenta de administrador del siguiente modo:</p>
                        <pre class="na nb nc nd ne hm fn ch"><span id="574e" class="nf ma dz ap mz b ec ng nh l ni" data-selectable-paragraph="">from . import models
                        class TodoListAdmin(admin.ModelAdmin):
                        list_display = ("title",  "created", "due_date")
                        class CategoryAdmin(admin.ModelAdmin):
                        list_display = ("name",)
                        admin.site.register(models.TodoList, TodoListAdmin)
                        admin.site.register(models.Category, CategoryAdmin)
                        </span></pre>
                        <br>
                        <p>Y corremos el siguiente comando para hacer el setup: <br></p>

                        <code>manage.py createsuperuser</code>
                        <p>&nbsp;</p>
                        <p>Donde introducimos usuario correo y contraseña para poder agregar categorías a nuestra lista</p>

                        <img src="img/createSuperUserDjango.jpg" width="900px">

                        <br>
                        <p>&nbsp;</p>
                        <p>Una vez terminado este proceso podemos repetir los pasos para entrar a nuestra aplicación:</p>
                        <p>&nbsp;</p>

                        <code>manage.py runserver 8100</code>
                        <p>&nbsp;</p>
                        <p>Y dirigirnos a la siguiente ruta: <br></p>
                        <p>http://localhost:8100/admin</p>
                        <p>&nbsp;</p>


                        <img src="img/adminLogin.jpg" width="900px">
                        <p>&nbsp;</p>
                        <p>Hacemos login con las credenciales creadas y podemos crear una nueva categoría:</p>
                        <p>&nbsp;</p>
                        <img src="img/adminAddCategories.jpg" width="900px">

                        <p>&nbsp;</p>

                        <img src="img/createTareaCategory.jpg" width="900px">

                        <p>&nbsp;</p>
                        <p>Regresamos a http://localhost:8100 y podemos por fín agregar nuestras tareas a la lista TODO y marcarlas como completadas.</p>

                        <p>&nbsp;</p>
                        <img src="img/addTaskTODO.jpg" width="900px">
                        <p>&nbsp;</p>
                        <img src="img/taskComplete.jpg" width="900px">

                        <br>
                        <br>
                        <p>Para correr nuestro programa en un sistema UNIX solo hace falta descargar el programa fuente desde <a href="https://github.com/maravilla/Django-ToDo-App"> Este Repositorio</a></p>


                        <p> Asegurarnos de tener las dependencias adecuadas y correr nuestro servidor de Django</p>

                        <p> Hay que destacar que la sentencia que nos permite ejecutar este programa en múltiples sistemas operativos (Unix y Windows) es el shebang #! que ponemos en la primer línea de nuestro código fuente: </p>

                        <code> #!/usr/bin/python </code>

                        <p> Ésta es la línea que nos va a permitir correr este código en UNIX ya que para crear el ejecutable esta predirectiva le indica al interprete la manera en la que puede transformar el código fuente a un ejecutable adecuado de manera automática</p>

                        <p> Ésta predirectiva puede tener impacto en Windows cuando existen múltiples interpretes de Python instalados y deseamos seleccionar uno manualmente. </p>




                    </div>
                    <!-- /blog post -->


                </div>
                <!-- /main blog -->

            </div>
            <!-- row -->

        </div>
        <!-- container -->

    </div>
    <!-- /Blog -->

    <!-- Footer -->
    <footer id="footer" class="section">

        <!-- container -->
        <div class="container">

            <!-- row -->
            <div class="row">

                <!-- footer nav -->
                <div class="col-md-6">
                    <ul class="footer-nav">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#">Actividades</a></li>
                    </ul>
                </div>
                <!-- /footer nav -->

            </div>
            <!-- /row -->

            <!-- row -->
            <div id="bottom-footer" class="row">


                <!-- copyright -->
                <div class="col-md-8 col-md-pull-4">
                    <div class="footer-copyright">
                        <span>&copy; Copyright 2018. All Rights Reserved. | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com">Colorlib</a></span>
                    </div>
                </div>
                <!-- /copyright -->

            </div>
            <!-- row -->

        </div>
        <!-- /container -->

    </footer>
    <!-- /Footer -->

    <!-- preloader -->
    <div id='preloader'>
        <div class='preloader'></div>
    </div>
    <!-- /preloader -->


    <!-- jQuery Plugins -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>

</body>

</html>
